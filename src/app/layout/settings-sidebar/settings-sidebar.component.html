  <!-- Chat Controls Sidebar -->
  <p-sidebar
    [(visible)]="showControls"
    position="right"
    styleClass="w-full sm:w-96 bg-white dark:bg-gray-900"
  >
    <ng-template pTemplate="header">
      <div
        class="flex items-center justify-between w-full p-4 border-b border-gray-200 dark:border-gray-800"
      >
        <h2 class="text-xl font-semibold">Settings</h2>
        <!-- <button
          pButton
          icon="pi pi-times"
          class="p-button-text p-button-rounded"
          (click)="showControls = false"
        ></button> -->
      </div>
    </ng-template>

    <div class="p-4">
      <p-accordion [activeIndex]="0" styleClass="border-none">
        <p-accordionTab header="Model Settings">
          <div class="space-y-4">
            <div class="flex flex-col space-y-2">
              <label class="text-sm font-medium">Model</label>
              <p-dropdown
                [options]="modelOptions"
                [(ngModel)]="selectedModel"
                optionLabel="name"
                styleClass="w-full"
              ></p-dropdown>
            </div>

            <div class="flex flex-col space-y-2">
              <label class="text-sm font-medium">Temperature</label>
              <div class="flex items-center">
                <p-slider
                  [(ngModel)]="temperature"
                  [min]="0"
                  [max]="1"
                  [step]="0.1"
                  class="w-full"
                ></p-slider>
                <span class="ml-2 text-sm">{{ temperature }}</span>
              </div>
              <p class="text-xs text-gray-500">
                Lower = more focused, Higher = more creative
              </p>
            </div>
          </div>
        </p-accordionTab>

        <p-accordionTab header="System Prompt">
          <div class="mb-4">
            <textarea
              pInputTextarea
              rows="5"
              class="w-full"
              placeholder="Enter system prompt to customize DocuMind's behavior"
              [(ngModel)]="systemPrompt"
            ></textarea>
            <div class="flex justify-end mt-2">
              <p-button
                label="Set Default"
                styleClass="p-button-sm p-button-outlined mr-2"
              ></p-button>
              <p-button label="Apply" styleClass="p-button-sm"></p-button>
            </div>
          </div>
        </p-accordionTab>

        <p-accordionTab header="Advanced Params">
          <div class="space-y-4">
            <div class="flex justify-between items-center">
              <span>Stream Response</span>
              <p-inputSwitch [(ngModel)]="streamResponse"></p-inputSwitch>
            </div>
            <div class="flex justify-between items-center">
              <span>Function Calling</span>
              <p-inputSwitch [(ngModel)]="functionCalling"></p-inputSwitch>
            </div>
            <div class="flex justify-between items-center">
              <span>Reasoning Effort</span>
              <p-dropdown
                [options]="reasoningOptions"
                [(ngModel)]="selectedReasoning"
                styleClass="w-40"
                optionLabel="name"
              ></p-dropdown>
            </div>
          </div>
        </p-accordionTab>

        <p-accordionTab header="Appearance">
          <div class="space-y-4">
            <div class="flex justify-between items-center">
              <span>Dark Mode</span>
              <p-inputSwitch
                [(ngModel)]="darkMode"
                (onChange)="toggleDarkMode()"
              ></p-inputSwitch>
            </div>
            <div class="flex flex-col space-y-2">
              <label class="text-sm font-medium">Theme Color</label>
              <div class="flex space-x-2">
                <div
                  *ngFor="let color of themeColors"
                  class="w-8 h-8 rounded-full cursor-pointer border-2"
                  [ngClass]="{
                    'border-blue-500': selectedColor === color.value,
                    'border-transparent': selectedColor !== color.value
                  }"
                  [ngStyle]="{ 'background-color': color.code }"
                  (click)="selectThemeColor(color.value)"
                ></div>
              </div>
            </div>
          </div>
        </p-accordionTab>
      </p-accordion>
    </div>
  </p-sidebar>